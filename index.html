<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"kuangtsao.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜尋...","empty":"我們無法找到任何有關 ${query} 的搜索結果","hits_time":"${hits} 找到 ${time} 個結果","hits":"找到 ${hits} 個結果"}}</script><script src="/js/config.js"></script>
<meta name="description" content="鐵柵間的微光指引我的道路">
<meta property="og:type" content="website">
<meta property="og:title" content="囚徒的窗格">
<meta property="og:url" content="https://kuangtsao.github.io/index.html">
<meta property="og:site_name" content="囚徒的窗格">
<meta property="og:description" content="鐵柵間的微光指引我的道路">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Marcus Liu">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://kuangtsao.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-TW","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>囚徒的窗格</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切換導航欄" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">囚徒的窗格</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目錄
        </li>
        <li class="sidebar-nav-overview">
          本站概要
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Marcus Liu</p>
  <div class="site-description" itemprop="description">鐵柵間的微光指引我的道路</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">文章</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">標籤</span>
      </div>
  </nav>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="回到頂端">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://kuangtsao.github.io/2022/02/14/browser-event-loop/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Marcus Liu">
      <meta itemprop="description" content="鐵柵間的微光指引我的道路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="囚徒的窗格">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/02/14/browser-event-loop/" class="post-title-link" itemprop="url">browser-event-loop</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>
      

      <time title="創建時間：2022-02-14 00:33:55 / 修改時間：01:03:31" itemprop="dateCreated datePublished" datetime="2022-02-14T00:33:55+08:00">2022-02-14</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="什麼是-event-loop？"><a href="#什麼是-event-loop？" class="headerlink" title="什麼是 event loop？"></a>什麼是 event loop？</h2><p>Event loop 是一種 design pattern，處理事件該在哪時候執行；瀏覽器與 nodejs runtime 對此的實作，利用裡面包含的 javascript runtime main loop 裡面的 stack 紀錄事件，再利用 queue 記錄非同步(async)事件處理完的 callback (這個 queue 又被稱為 callback queue 或者 event queue)，這個 callback 通常會是一些 function；event loop 會隨時檢查 stack ，只要發現 stack 本身的事件處理完後，再將 queue 裡面的事件推到 stack 再作執行。</p>
<h2 id="所以-event-loop-到底是…？"><a href="#所以-event-loop-到底是…？" class="headerlink" title="所以 event loop 到底是…？"></a>所以 event loop 到底是…？</h2><p>為了搞清楚這件事<del>(同時也是 alpha camp 的其中一項作業)</del> ，首先，我們先從 Event Loop 上先做理解，萬事不決先找 google 和 wiki，然後我找到了蠻多基於瀏覽器 event loop，也就是大名鼎鼎的 <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=8aGhZQkoFbQ">what the heck is event loop?</a> 這場在 JSConfEU 2014 的演講的解說，以及大名鼎鼎的這張圖。</p>
<p><img src="/source/images/event-loop.png" alt="Untitled"></p>
<p>再看了一下 google 搜尋推薦的關鍵字，發現了一點不對。</p>
<p><img src="/source/images/search-event-loop.png" alt="Untitled"></p>
<p>python 也有個 event loop，直覺上而言，這一定是個通用的技巧，於是搜尋了 wiki，找到了以下的內容：</p>
<blockquote>
<p>In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_science">computer science</a>, the <strong>event loop</strong> is a programming construct or <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Software_design_pattern">design pattern</a> that waits for and dispatches <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Event-driven_programming">events</a> or <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Message_Passing_Interface">messages</a>  in a <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_program">program</a>. The event loop works by making a request to some internal or external “event provider” (that generally <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Blocking_(computing)">blocks</a> the request until an event has arrived), then calls the relevant <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Event_handler">event handler</a>(“dispatches the event”). The event loop is also sometimes referred to as the <strong>message dispatcher</strong>, <strong>message loop</strong>, <strong>message pump</strong><br>, or <strong>run loop</strong>.</p>
</blockquote>
<p>(Source: <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Event_loop">wikipedia</a>)</p>
<p>由上述的敘述可知，event loop 會從一個事件來源(<code>event provider</code>)做出請求，然後再叫相對應的事件處理(<code>event handler</code>)進行消耗，所以 event loop 並不是 javascript 獨一家的機制，如果再以 <code>event loop design pattern</code> 搜尋，或者參考該篇 wiki，就可以看到以其他語言或在其他套件上的實作。 </p>
<p>那 javascript 為何會跟 event loop 掛勾？或許得從 javascript 的歷史與它的一項特性說起。</p>
<h2 id="Javascript-的一段歷史與它的特性"><a href="#Javascript-的一段歷史與它的特性" class="headerlink" title="Javascript 的一段歷史與它的特性"></a>Javascript 的一段歷史與它的特性</h2><p>眾所皆知的是，javascript 最早出現於 Netscrape 這個瀏覽器，當時的開發人員預見了「網頁必須要變得更動態」，需要一個易於使用的程式語言面向普羅大眾；而為了「動態顯示網頁」，所以 javascript 在當初設計時必定是單執行緒(single thread)的。為什麽呢？如果我們對網頁進行 DOM 的操作，程式的一項指令是新增 DOM 節點，一項指令是刪除的 DOM 節點；如果在多執行緒併發的環境，就會產生未知的問題；所以，javascript 設計上會是單執行緒的，在同一時間內只能處理一件事，而為了記錄這些程式指令，javascript runtime 選擇以 stack 來記錄。</p>
<p>不過，為了能使動態網頁能夠讓感覺載入時間短，能夠展現在上面做的花團錦簇的效果，那勢必得有種方法處理大量的程式調用 api，所以我們還是得讓單執行緒的 javascript 做出如同多執行緒併發的行為，那這要怎麽實現呢？於是 javascript 實作了非同步(async)，讓需要執行的程式們另開一個執行緒，執行它們需要做的事情，再將執行完的結果丟回原來的 stack 就可以了。</p>
<h2 id="stack-amp-queue"><a href="#stack-amp-queue" class="headerlink" title="stack &amp; queue"></a>stack &amp; queue</h2><p>那 stack 和 queue 又是什麽呢？它們是一種資料結構。我們想像一個陣列，裡面存放著元素；stack 與 queue 的不同，在於取用元素的方式不同。stack 是第一個進來，最後一個出去(First in, Last out;簡寫 FILO)；queue 就是第一個進來，第一個出去(First In , First Out 簡寫為 FIFO)。</p>
<p>以 javascript 而言，可以使用 array.push() (新增元素到陣列尾端，並回傳新的長度) 和 array.pop()(刪除並回傳尾端元素) 實現 stack；利用 array.push() 與 array.shift() (刪除並回傳第一個元素) 來實現 queue。</p>
<p>學理上的東西講多了，這裡有個例子可以做參考，以下是一段範例程式碼：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function multiply(a, b) &#123;</span><br><span class="line">  return a * b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function square(n) &#123;</span><br><span class="line">  return multiply(n, n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function printSquare(n) &#123;</span><br><span class="line">  let squared = square(n)</span><br><span class="line">  console.log(squared)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printSquare(4)</span><br></pre></td></tr></table></figure>

<p>在我們撰寫 javascript 時，有一個常見的說法是「javascript 是由上往下執行」，指的就是這個塞入 stack 執行的過程，由上而下讀完之後，再從 printSquare(4) 開始反向塞起，由於 printSquare 是一個函式呼叫(function call)，所以就塞入 main stack，接著又發現有 printSquare 這個函式，就不斷的塞入直到 multiply() 也進入為止；接著再從 multiply() 開始跳出(執行)，直到 printSquare(4) 跳出，整個程式就執行完了。</p>
<h3 id="瀏覽器實作的-event-loop"><a href="#瀏覽器實作的-event-loop" class="headerlink" title="瀏覽器實作的 event loop"></a>瀏覽器實作的 event loop</h3><p><img src="/source/images/event-loop.png" alt="Untitled"></p>
<p>再拿這張圖說說瀏覽器的 event loop 怎麽實作的。我們以一段 code 來理解瀏覽器怎麽運作</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;I am&#x27;</span>)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> <span class="title">timer</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(<span class="string">&#x27;!&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;Ironman&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>它的 output 如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">I am</span><br><span class="line">Ironman</span><br><span class="line">!</span><br></pre></td></tr></table></figure>

<p>為什麽會有這樣的結果呢？</p>
<p>我們可以看向上面這張圖，由於像 <code>setTimeout</code> 這種類型的 function，是由瀏覽器提供的 web api(同樣也是以 stack 實作)去執行的，所以會這個 stack 執行完，再將裡面的 callback function 丟入 callback queue，接著就是 event loop 出場的時候，event loop 會時時檢查 callback queue 與 main stack，如果發現有 callback queue 有事件(在這裡就是被 web api 執行完 setTimeout 之後，被丟進來的 callback function)，且 main stack 為空就直接丟進去 main stack 執行。即使 setTimeout 的 timeout 時間設為 0，也是會遵循「等待 main stack 淨空後」的規則，所以驚嘆號會是最後一個執行。</p>
<p>那接下來，我覺得需要注意的點是，在 main stack，盡量不要執行太久的程式碼，會造成的瀏覽器無法繼續 render。比如以下的程式碼：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Synchronous</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>].forEach(<span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">  delay()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Asynchronous</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">asyncForEach</span>(<span class="params">array, cb</span>) </span>&#123;</span><br><span class="line">  array.forEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(cb, <span class="number">0</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncForEach([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], <span class="function"><span class="keyword">function</span> (<span class="params">i</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">  delay()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>瀏覽器會在每個 60 FPS 的時候更新渲染畫面，而渲染的執行順序高於 callback function。</p>
<p>以上的程式碼執行，會先優先執行 Synchronous 這段的程式碼，透過 <a target="_blank" rel="noopener" href="http://latentflip.com/loupe/">loupe</a> 觀察，可以看到，render queue 會被 hold 住，所以如果需要一段時間執行的程式碼，可以丟去 async 跑。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://kuangtsao.github.io/2022/01/28/how-to-make-alert-popup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Marcus Liu">
      <meta itemprop="description" content="鐵柵間的微光指引我的道路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="囚徒的窗格">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2022/01/28/how-to-make-alert-popup/" class="post-title-link" itemprop="url">如何利用 handlebars 做出警告提示</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>
      

      <time title="創建時間：2022-01-28 17:01:22 / 修改時間：19:05:06" itemprop="dateCreated datePublished" datetime="2022-01-28T17:01:22+08:00">2022-01-28</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>alphacamp 在學期 2-3 有一份作業，是根據教材中打造電影清單的方式，依樣畫葫蘆的做出餐廳清單。其中作業驗收的標準「行有餘力」的部分有提到可以擴充的規格裡有一項：「搜尋沒有結果時也有對應頁面提示」，在寫這份作業的當下覺得必要的功能大致上差不多了，在之前的作業也曾經想要挑戰類似的功能但後來實在想不到怎麼實作，就來挑戰看看這個項目。</p>
<p>在當下，我完全腦袋一片空白，要怎麼做出來毫無頭緒，嘗試搜尋看看有沒有相關例子可以拿來參考，但在網路資料的大海完全找不到。</p>
<p>後來想想，若要解決問題必先拆解，於是開始構思起整個功能該怎麼實做：  </p>
<ul>
<li>如果是搜尋所產生的其中一種結果<ul>
<li>這個功能一定與搜尋相關<ul>
<li>所以一定是由後端產生結果</li>
</ul>
</li>
<li>這個功能會跳出一項警告<ul>
<li>會從畫面看到這個警告，前端要顯示</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>搭配這個作業所使用的 <a target="_blank" rel="noopener" href="https://github.com/kuangtsao/ac-restaurantList">repo</a>，會有效協助還原當時的一些過程與想法，請先 clone 下來後，利用 <code>git checkout alert-pop</code>後，再 <code>git reset f1502288</code>，利用<code>npm run dev</code> 跑起來後，接著再利用 <code>git reset</code> 去跳 commit 在本地端觀察，或者利用 github 本身紀錄該專案的<a target="_blank" rel="noopener" href="https://github.com/kuangtsao/ac-restaurantList/commits/master">所有 commits 的頁面</a><br>切換到 alert-pop 以利觀察。  </p>
</blockquote>
<blockquote>
<p>下段請跳到 alert-pop branch 的 commit f150228</p>
</blockquote>
<p>在紙上寫下這些想法後，於是先找起 bootstrap 5 對於 <a target="_blank" rel="noopener" href="https://getbootstrap.com/docs/5.1/components/alerts/">alert</a> 的說明，先把它加進 <code>index.handlebars</code> 裡面。  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;alert alert-warning alert-dismissible fade show&quot; role=&quot;alert&quot;&gt;</span><br><span class="line">  &lt;strong&gt;Holy guacamole!&lt;/strong&gt; You should check in on some of those fields below.</span><br><span class="line">  &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>於是我就得到了會跑版的警告橫條，接著再反覆試驗，先無視跑版，將複製貼上的 html 裡面的說明文改成搜尋失敗會出現的警告文字就行了。  </p>
<p>index.handlebars</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;alert alert-warning alert-dismissible fade show mt-4&quot; role=&quot;alert&quot;&gt;</span><br><span class="line">  &lt;strong&gt;找不到餐廳！&lt;/strong&gt; 請重新考慮關鍵字！(餐廳中英文名字或類別！)</span><br><span class="line">  &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>下段請跳到 alert-pop branch 的 commit 8291373</p>
</blockquote>
<p>接著再考慮怎麼樣讓這個畫面跑出來，在教案之中，我們學到利用 handlebars 在前端的 html 中，傳輸必要的內容以及利用迴圈產生會重複出現的 html 區塊。當時想著：「既然有迴圈，那 handlebars 應該有類似 if-else 的流程控制吧？」果不其然的再它們<a target="_blank" rel="noopener" href="https://handlebarsjs.com/guide/builtin-helpers.html">官網文件</a>上找到了 if 和 unless 的敘述。</p>
<p>那接著就是再決定這個 flag 該怎麼產生了。當時是透過搜尋按鈕觸發 <code>/search</code> 這個路由，那再透過 <code>information</code> 這個陣列 filter 後的長度決定是跳到首頁或者呈現搜尋結果。</p>
<p>接著再決定 flag 怎麼管理，當時單純地想著利用全域變數去做管理，所以程式碼就像下面這樣。</p>
<p>app.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">let findingStatus = true</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">app.get(&#x27;/search&#x27;, (req, res) =&gt; &#123;</span><br><span class="line">  // 搜尋字串去除空白</span><br><span class="line">  const keyword = req.query.keyword.trim()</span><br><span class="line">  // 只要關鍵字符合其中一個，就返回內容到陣列</span><br><span class="line">  const information = restaurantList.results.filter(information =&gt; information.category.includes(keyword) || information.name.includes(keyword) || information.name_en.toLowerCase().includes(keyword.toLowerCase()))</span><br><span class="line"></span><br><span class="line">  // 搜尋時會重複多次 /search 路由，所以每次進入都要重新管理</span><br><span class="line"></span><br><span class="line">  if (information.length &gt; 0) &#123;</span><br><span class="line">    findingStatus = true</span><br><span class="line">    res.render(&#x27;index&#x27;, &#123; restaurants: information , findingStatus: findingStatus &#125;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    res.render(&#x27;index&#x27;, &#123; restaurants: information &#125;)</span><br><span class="line">    findingStatus = false</span><br><span class="line">    res.render(&#x27;index&#x27;, &#123; restaurants: restaurantList.results, findingStatus: findingStatus &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>考慮到 <code>findingStatus</code> 的語意與 if 的流程，在 <code>index.handlebars</code> 裡面採用 <code>unless</code> 實作。<br>index.handlebars</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;#unless findingStatus&#125;&#125;</span><br><span class="line">&lt;div class=&quot;alert alert-warning alert-dismissible fade show mt-4&quot; role=&quot;alert&quot;&gt;</span><br><span class="line">  &lt;strong&gt;找不到餐廳！&lt;/strong&gt; 請重新考慮關鍵字！(餐廳中英文名字或類別！)</span><br><span class="line">  &lt;button type=&quot;button&quot; class=&quot;btn-close&quot; data-bs-dismiss=&quot;alert&quot; aria-label=&quot;Close&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&#123;&#123;/unless&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>到此功能整體完成，之後在調整版面，以及引入 <code>font-awesome</code> 的 icon 美化版面。</p>
<p>回顧這個功能怎麼做出來的，其實寫到現在大致上可以歸納出三點：  </p>
<ol>
<li>分解問題，讓這個問題變成較小的區塊</li>
<li>搜尋可參考的資料；根據以往寫程式的經驗來推斷怎麼做</li>
<li>反覆實驗，先做出一定的成果再來想細節，<code>不要一開始就想要做出完美成果</code></li>
</ol>
<p>在後續的作業我大致上是照著這三點去執行，當然如果有真的寫不出來的狀況，就去多多觀摩其他人的做法並且學起來。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://kuangtsao.github.io/2021/11/12/alphacamp-2-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Marcus Liu">
      <meta itemprop="description" content="鐵柵間的微光指引我的道路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="囚徒的窗格">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/12/alphacamp-2-1/" class="post-title-link" itemprop="url">Alphacamp 學期 2-1 學習回饋</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2021-11-12 00:59:15" itemprop="dateCreated datePublished" datetime="2021-11-12T00:59:15+08:00">2021-11-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2022-01-28 17:00:42" itemprop="dateModified" datetime="2022-01-28T17:00:42+08:00">2022-01-28</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>這個學期主要進行的是：</p>
<h3 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h3><ul>
<li>概念上的加深 ex. scope</li>
<li>資料結構簡介與設計</li>
<li>函式(function)介紹<h3 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h3></li>
<li>CSS 佈局工具</li>
<li>BootStrap 介紹與使用</li>
<li>RWD 簡介<h3 id="DOM-操作與事件處理"><a href="#DOM-操作與事件處理" class="headerlink" title="DOM 操作與事件處理"></a>DOM 操作與事件處理</h3></li>
<li>簡介 DOM</li>
<li>操作 DOM</li>
<li>實際設計事件驅動程式</li>
</ul>
<p>在這四個禮拜內，這些內容說多也算多，說說少也不少；內容如同我之前的感受一樣，看起來很難，但實際上參與進去之後會發現還蠻簡單的或者被炸飛。  </p>
<p>不過其實最想談的是，這一個學習我歷經了身份的轉變，由工作中進修變成了全職學習，目前反而遇到的挑戰比較是如何保持專注在學習上，以及如何真的完成自己排下的進度—由於我之前是擔任維運工程師，也順便希望加強一些自己不足的東西，比如：aws(主要希望摸透<br>SAA),K8s，但目前的時間點也還沒開始動。</p>
<p>希望進入到下一個學習階段時，能夠找到專注及處理焦慮的方式，以及能夠好好完成自己與 AC 排定的進度。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://kuangtsao.github.io/2021/11/11/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Marcus Liu">
      <meta itemprop="description" content="鐵柵間的微光指引我的道路">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="囚徒的窗格">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/11/hello-world/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">發表於</span>

      <time title="創建時間：2021-11-11 22:32:56" itemprop="dateCreated datePublished" datetime="2021-11-11T22:32:56+08:00">2021-11-11</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新於</span>
        <time title="修改時間：2021-11-13 15:10:18" itemprop="dateModified" datetime="2021-11-13T15:10:18+08:00">2021-11-13</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>vnwojvnoiwjoiwjoiwjvoiwjvoiewjviwjeoijwvjewjivwoij</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>





</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Marcus Liu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 強力驅動
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
